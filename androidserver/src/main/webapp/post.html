<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <link rel="stylesheet" type="text/css" href="http://ququplay.github.io/jquery-mobile-flat-ui-theme/css/jquery.mobile.flatui.css" />
  <script src="http://ququplay.github.io/jquery-mobile-flat-ui-theme/js/jquery.min.js"></script>
  <script src="http://ququplay.github.io/jquery-mobile-flat-ui-theme/js/jquery.mobile-1.3.1.min.js"></script>
  
  <script type="text/javascript">
  //파라미터 가져오기
  $.urlParam = function(name){
	  var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
	  return results[1] || 0;
	}
  
  var ip = '10.131.159.44:8080/androidserver';
  var bidx = $.urlParam('bidx');
  
  postOne();
  
  //글 상세정보
  function postOne() {
	  var params = {
		        bidx : bidx
		    };
	  
    $.ajax('http://' + ip + '/board/view.do', {
      method : 'GET',
      data : params,
      dataType : 'json',
      success : function(result) {
        var rows = result.data;
        var table1 = $('#questionTable');
        var table2 = $('#answerTable');
          
           $('<tr>').html(
              '<th>' + rows.bidx + '</th>\n'
            + '<td><a data-rel="external" class="ui-link">' + rows.btitle + '</a></td>\n'
            + '<td>' + rows.onemember.mname + '</td>\n'
            + '<td>' + rows.bhits + '</td>\n')
              .appendTo(table1);
          $('<tr>').html(
              '<th></th>\n'
            + '<td colspan="3">' + rows.bcontent + '</td>\n')
              .appendTo(table1);
          
          
	           $('<tr>').html(
	              '<td colspan="2"></td>\n'
	            + '<td>' + rows.comments[0].onemember.mname + '</td>\n'
	            + '<td>' + rows.comments[0].cdate + '</td>\n')
	              .appendTo(table2);
	          $('<tr>').html(
	              '<th></th>\n'
	            + '<td colspan="3">' + rows.comments[0].ccontent + '</td>\n')
	              .appendTo(table2);
          
      },
      error : function(xhr, textStatus, errorThrown) {
        alert('작업을 완료할 수 없습니다.\n' + '잠시 후 다시 시도하세요.\n');
      }
    });
  }
  
</script>
  
<style>
a{ text-decoration: none;}
</style>
</head>

<body>
<div data-role="page">

<!-- 답변 판넬 -->
<div  data-theme="a" data-role="panel"  data-position="right" id="panel">
  <textarea placeholder="답변 내용을 입력해주세요!" style="height:400px;"rows="20" name="textarea-2" id="textarea-2"></textarea>
  <div data-role="controlgroup">
		<a data-icon="check" href="index.html"  data-theme="c" data-role="button">확인</a>
		<a  data-icon="delete" href="index.html"  data-theme="d" data-role="button">취소</a>
  </div>
</div>

<!-- 헤더 -->
<div data-role="header">
  <a data-iconpos="notext" data-role="button" data-icon="home" title="Home">Home</a>
  <h1>글보기 </h1>
  <a data-iconpos="notext" href="#panel" data-role="button" data-icon="flat-new"></a>
</div>

<div data-role="content" role="main">

<!-- 질문 -->
<table>
 <thead>
   <tr>
     <th style="width:10%; data-priority="1"></th>
     <th style="width:80%;"data-priority="persist"></th>
     <th style="width:20%; data-priority="2"></th>
     <th style="width:20%; data-priority="4"></th>
    </tr>
 </thead>
  <tbody id="questionTable">
  <!-- 받아온 값이 세팅되는 DOM(질문) --> 
  </tbody>
</table>

<hr>

<!-- 답변 -->
<table>
  <thead>
    <tr>
	    <th style="width:10%; data-priority="1"></th>
	    <th style="width:80%;"data-priority="persist"></th>
	    <th style="width:20%; data-priority="2"></th>
	    <th style="width:20%; data-priority="4"></th>
    </tr>
  </thead>
  <tbody id="answerTable">
    <!-- 받아온 값이 세팅되는 DOM(답변) -->
  </tbody>
</table>

 </div>

<!-- 푸터 -->	
<div data-role="footer" data-position="fixed">
<input data-theme="c" type="search" name="search" id="search-basic" value="" />
</div>
</div>
</body>
</html>
